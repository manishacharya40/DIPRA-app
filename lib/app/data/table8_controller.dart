import 'package:get/get.dart';

class Table8Controller extends GetxController {
  final Map<double, double> bendingStressMap = {
    6.29: 170,
    6.34: 169,
    6.39: 168,
    6.44: 167,
    6.5: 166,
    6.55: 165,
    6.6: 164,
    6.66: 163,
    6.71: 162,
    6.77: 161,
    6.82: 160,
    6.88: 159,
    6.94: 158,
    6.99: 157,
    7.05: 156,
    7.11: 155,
    7.17: 154,
    7.23: 153,
    7.29: 152,
    7.35: 151,
    7.42: 150,
    7.48: 149,
    7.54: 148,
    7.61: 147,
    7.67: 146,
    7.74: 145,
    7.8: 144,
    7.87: 143,
    7.94: 142,
    8.01: 141,
    8.08: 140,
    8.15: 139,
    8.22: 138,
    8.29: 137,
    8.37: 136,
    8.44: 135,
    8.52: 134,
    8.59: 133,
    8.67: 132,
    8.75: 131,
    8.83: 130,
    8.91: 129,
    8.99: 128,
    9.07: 127,
    9.16: 126,
    9.25: 125,
    9.33: 124,
    9.42: 123,
    9.51: 122,
    9.6: 121,
    9.7: 120,
    9.79: 119,
    9.89: 118,
    9.99: 117,
    10.09: 116,
    10.19: 115,
    10.29: 114,
    10.4: 113,
    10.51: 112,
    10.62: 111,
    10.73: 110,
    10.84: 109,
    10.96: 108,
    11.08: 107,
    11.21: 106,
    11.33: 105,
    11.46: 104,
    11.59: 103,
    11.73: 102,
    11.87: 101,
    12.01: 100,
    12.16: 99,
    12.31: 98,
    12.46: 97,
    12.62: 96,
    12.79: 95,
    12.96: 94,
    13.13: 93,
    13.31: 92,
    13.49: 91,
    13.68: 90,
    13.88: 89,
    14.08: 88,
    14.3: 87,
    14.51: 86,
    14.74: 85,
    14.97: 84,
    15.21: 83,
    15.46: 82,
    15.72: 81,
    15.99: 80,
    16.28: 79,
    16.57: 78,
    16.87: 77,
    17.19: 76,
    17.52: 75,
    17.86: 74,
    18.22: 73,
    18.59: 72,
    18.98: 71,
    19.39: 70,
    19.82: 69,
    20.27: 68,
    20.73: 67,
    21.23: 66,
    21.74: 65,
    22.28: 64,
    22.85: 63,
    23.45: 62,
    24.07: 61,
    24.74: 60,
    25.43: 59,
    26.17: 58,
    26.95: 57,
    27.77: 56,
    28.64: 55,
    29.56: 54,
    30.53: 53,
    31.57: 52,
    32.67: 51,
    33.84: 50,
    35.08: 49,
    36.41: 48,
    37.83: 47,
    39.34: 46,
    40.96: 45,
    42.7: 44,
    44.57: 43,
    46.57: 42,
    48.73: 41,
    51.06: 40,
    53.57: 39,
    56.3: 38,
    59.25: 37,
    62.46: 36,
    65.96: 35,
    69.79: 34,
    73.98: 33,
    78.57: 32,
    83.64: 31,
  };

  final Map<double, double> deflectionMap = {
    6.18: 170,
    6.19: 169,
    6.21: 168,
    6.23: 167,
    6.25: 166,
    6.26: 165,
    6.28: 164,
    6.3: 163,
    6.32: 162,
    6.34: 161,
    6.37: 160,
    6.39: 159,
    6.41: 158,
    6.43: 157,
    6.46: 156,
    6.48: 155,
    6.5: 154,
    6.53: 153,
    6.56: 152,
    6.58: 151,
    6.61: 150,
    6.64: 149,
    6.67: 148,
    6.7: 147,
    6.73: 146,
    6.76: 145,
    6.79: 144,
    6.83: 143,
    6.86: 142,
    6.89: 141,
    6.93: 140,
    6.97: 139,
    7.01: 138,
    7.05: 137,
    7.09: 136,
    7.13: 135,
    7.17: 134,
    7.22: 133,
    7.26: 132,
    7.31: 131,
    7.36: 130,
    7.41: 129,
    7.46: 128,
    7.51: 127,
    7.57: 126,
    7.63: 125,
    7.69: 124,
    7.75: 123,
    7.81: 122,
    7.87: 121,
    7.94: 120,
    8.01: 119,
    8.08: 118,
    8.16: 117,
    8.23: 116,
    8.31: 115,
    8.4: 114,
    8.48: 113,
    8.57: 112,
    8.66: 111,
    8.76: 110,
    8.86: 109,
    8.96: 108,
    9.07: 107,
    9.18: 106,
    9.29: 105,
    9.41: 104,
    9.54: 103,
    9.67: 102,
    9.8: 101,
    9.94: 100,
    10.09: 99,
    10.24: 98,
    10.4: 97,
    10.56: 96,
    10.73: 95,
    10.91: 94,
    11.1: 93,
    11.29: 92,
    11.5: 91,
    11.71: 90,
    11.94: 89,
    12.17: 88,
    12.42: 87,
    12.67: 86,
    12.94: 85,
    13.22: 84,
    13.52: 83,
    13.83: 82,
    14.16: 81,
    14.5: 80,
    14.86: 79,
    15.24: 78,
    15.64: 77,
    16.06: 76,
    16.51: 75,
    16.98: 74,
    17.48: 73,
    18.0: 72,
    18.56: 71,
    19.14: 70,
    19.77: 69,
    20.43: 68,
    21.13: 67,
    21.87: 66,
    22.67: 65,
    23.51: 64,
    24.41: 63,
    25.37: 62,
    26.39: 61,
    27.49: 60,
    28.66: 59,
    29.91: 58,
    31.26: 57,
    32.71: 56,
    34.26: 55,
    35.93: 54,
    37.74: 53,
    39.69: 52,
    41.8: 51,
    44.09: 50,
    46.56: 49,
    49.26: 48,
    52.19: 47,
    55.4: 46,
    58.89: 45,
    62.73: 44,
    66.93: 43,
    71.56: 42,
    76.66: 41,
    82.29: 40,
    88.54: 39,
    95.48: 38,
    103.21: 37,
    111.85: 36,
    121.54: 35,
    132.44: 34,
    144.74: 33,
    158.68: 32,
    174.54: 31,
  };

  double? getDt(String keyType, double keyValue) {
    Map<double, double> dataMap =
        keyType == "bending stress" ? bendingStressMap : deflectionMap;

    if (dataMap.containsKey(keyValue)) {
      return dataMap[keyValue];
    } else {
      // Find the closest keys
      List<double> sortedKeys = dataMap.keys.toList()..sort();
      double lowerKey = sortedKeys.lastWhere(
        (k) => k < keyValue,
        orElse: () => sortedKeys.first,
      );
      double upperKey = sortedKeys.firstWhere(
        (k) => k > keyValue,
        orElse: () => sortedKeys.last,
      );

      // Check if the value is midway
      if ((keyValue - lowerKey) == (upperKey - keyValue)) {
        // Interpolate
        double lowerValue = dataMap[lowerKey]!;
        double upperValue = dataMap[upperKey]!;
        return (lowerValue + upperValue) / 2;
      } else if ((keyValue - lowerKey) < (upperKey - keyValue)) {
        // Closer to lower key
        return dataMap[lowerKey];
      } else {
        // Closer to upper key
        return dataMap[upperKey];
      }
    }
  }
}
