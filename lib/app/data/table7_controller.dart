import 'package:get/get.dart';

class Table7Controller extends GetxController {
  final Map<double, double> bendingStressMap = {
    4.4: 170,
    4.43: 169,
    4.46: 168,
    4.5: 167,
    4.54: 166,
    4.57: 165,
    4.61: 164,
    4.64: 163,
    4.68: 162,
    4.72: 161,
    4.76: 160,
    4.8: 159,
    4.84: 158,
    4.88: 157,
    4.92: 156,
    4.96: 155,
    5.0: 154,
    5.04: 153,
    5.08: 152,
    5.13: 151,
    5.17: 150,
    5.21: 149,
    5.26: 148,
    5.3: 147,
    5.35: 146,
    5.4: 145,
    5.45: 144,
    5.49: 143,
    5.54: 142,
    5.59: 141,
    5.65: 140,
    5.7: 139,
    5.75: 138,
    5.8: 137,
    5.86: 136,
    5.91: 135,
    5.97: 134,
    6.03: 133,
    6.09: 132,
    6.15: 131,
    6.21: 130,
    6.27: 129,
    6.33: 128,
    6.4: 127,
    6.46: 126,
    6.53: 125,
    6.6: 124,
    6.67: 123,
    6.74: 122,
    6.82: 121,
    6.89: 120,
    6.97: 119,
    7.05: 118,
    7.13: 117,
    7.21: 116,
    7.29: 115,
    7.38: 114,
    7.47: 113,
    7.56: 112,
    7.65: 111,
    7.75: 110,
    7.85: 109,
    7.95: 108,
    8.05: 107,
    8.16: 106,
    8.27: 105,
    8.38: 104,
    8.49: 103,
    8.61: 102,
    8.74: 101,
    8.86: 100,
    8.99: 99,
    9.13: 98,
    9.27: 97,
    9.41: 96,
    9.56: 95,
    9.71: 94,
    9.87: 93,
    10.03: 92,
    10.2: 91,
    10.37: 90,
    10.55: 89,
    10.74: 88,
    10.93: 87,
    11.13: 86,
    11.34: 85,
    11.55: 84,
    11.78: 83,
    12.01: 82,
    12.25: 81,
    12.5: 80,
    12.76: 79,
    13.03: 78,
    13.31: 77,
    13.6: 76,
    13.91: 75,
    14.23: 74,
    14.56: 73,
    14.91: 72,
    15.27: 71,
    15.65: 70,
    16.05: 69,
    16.46: 68,
    16.89: 67,
    17.35: 66,
    17.83: 65,
    18.33: 64,
    18.85: 63,
    19.4: 62,
    19.98: 61,
    20.59: 60,
    21.23: 59,
    21.91: 58,
    22.63: 57,
    23.38: 56,
    24.18: 55,
    25.02: 54,
    25.92: 53,
    26.86: 52,
    27.87: 51,
    28.94: 50,
    30.07: 49,
    31.28: 48,
    32.57: 47,
    33.95: 46,
    35.42: 45,
    37.0: 44,
    38.69: 43,
    40.5: 42,
    42.46: 41,
    44.56: 40,
    46.84: 39,
    49.3: 38,
    51.96: 37,
    54.86: 36,
    58.02: 35,
    61.46: 34,
    65.23: 33,
    69.36: 32,
    73.92: 31,
  };

  final Map<double, double> deflectionMap = {
    3.46: 170,
    3.48: 169,
    3.5: 168,
    3.51: 167,
    3.53: 166,
    3.55: 165,
    3.57: 164,
    3.59: 163,
    3.61: 162,
    3.63: 161,
    3.65: 160,
    3.67: 159,
    3.69: 158,
    3.71: 157,
    3.74: 156,
    3.76: 155,
    3.78: 154,
    3.81: 153,
    3.83: 152,
    3.86: 151,
    3.89: 150,
    3.91: 149,
    3.94: 148,
    3.97: 147,
    4.0: 146,
    4.03: 145,
    4.06: 144,
    4.09: 143,
    4.13: 142,
    4.16: 141,
    4.2: 140,
    4.23: 139,
    4.27: 138,
    4.31: 137,
    4.35: 136,
    4.39: 135,
    4.43: 134,
    4.47: 133,
    4.52: 132,
    4.56: 131,
    4.61: 130,
    4.66: 129,
    4.71: 128,
    4.76: 127,
    4.82: 126,
    4.87: 125,
    4.93: 124,
    4.99: 123,
    5.05: 122,
    5.11: 121,
    5.18: 120,
    5.25: 119,
    5.32: 118,
    5.39: 117,
    5.46: 116,
    5.54: 115,
    5.62: 114,
    5.71: 113,
    5.79: 112,
    5.88: 111,
    5.97: 110,
    6.07: 109,
    6.17: 108,
    6.27: 107,
    6.38: 106,
    6.49: 105,
    6.61: 104,
    6.73: 103,
    6.86: 102,
    6.99: 101,
    7.12: 100,
    7.26: 99,
    7.41: 98,
    7.57: 97,
    7.73: 96,
    7.89: 95,
    8.07: 94,
    8.25: 93,
    8.44: 92,
    8.64: 91,
    8.85: 90,
    9.06: 89,
    9.29: 88,
    9.53: 87,
    9.78: 86,
    10.04: 85,
    10.31: 84,
    10.6: 83,
    10.9: 82,
    11.22: 81,
    11.56: 80,
    11.91: 79,
    12.28: 78,
    12.67: 77,
    13.08: 76,
    13.51: 75,
    13.97: 74,
    14.45: 73,
    14.96: 72,
    15.5: 71,
    16.07: 70,
    16.68: 69,
    17.32: 68,
    18.0: 67,
    18.73: 66,
    19.5: 65,
    20.32: 64,
    21.19: 63,
    22.12: 62,
    23.12: 61,
    24.18: 60,
    25.32: 59,
    26.54: 58,
    27.85: 57,
    29.26: 56,
    30.77: 55,
    32.39: 54,
    34.15: 53,
    36.05: 52,
    38.1: 51,
    40.32: 50,
    42.73: 49,
    45.35: 48,
    48.2: 47,
    51.31: 46,
    54.72: 45,
    58.44: 44,
    62.53: 43,
    67.03: 42,
    71.99: 41,
    77.47: 40,
    83.54: 39,
    90.28: 38,
    97.8: 37,
    106.2: 36,
    115.62: 35,
    126.21: 34,
    138.18: 33,
    151.73: 32,
    167.15: 31,
  };

  double? getDt(String keyType, double keyValue) {
    Map<double, double> dataMap =
        keyType == "bending stress" ? bendingStressMap : deflectionMap;

    if (dataMap.containsKey(keyValue)) {
      return dataMap[keyValue];
    } else {
      // Find the closest keys
      List<double> sortedKeys = dataMap.keys.toList()..sort();
      double lowerKey = sortedKeys.lastWhere(
        (k) => k < keyValue,
        orElse: () => sortedKeys.first,
      );
      double upperKey = sortedKeys.firstWhere(
        (k) => k > keyValue,
        orElse: () => sortedKeys.last,
      );

      // Check if the value is midway
      if ((keyValue - lowerKey) == (upperKey - keyValue)) {
        // Interpolate
        double lowerValue = dataMap[lowerKey]!;
        double upperValue = dataMap[upperKey]!;
        return (lowerValue + upperValue) / 2;
      } else if ((keyValue - lowerKey) < (upperKey - keyValue)) {
        // Closer to lower key
        return dataMap[lowerKey];
      } else {
        // Closer to upper key
        return dataMap[upperKey];
      }
    }
  }
}
